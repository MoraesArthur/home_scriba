<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scriba - Dashboard</title>
    <!-- Fontes Google -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,700;1,400&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Ícones Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Arquivo CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                   <i class="fa-solid fa-feather-pointed"></i> Scriba.
                </div>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active" data-target="section-home">
                        <a href="#"><i class="fa-solid fa-house"></i> Página Inicial</a>
                    </li>
                    <li class="nav-item" data-target="section-books">
                        <a href="#"><i class="fa-solid fa-book"></i> Meus Livros</a>
                    </li>
                    <li class="nav-item" data-target="section-goals">
                        <a href="#"><i class="fa-solid fa-bullseye"></i> Metas</a>
                    </li>
                    <li class="nav-item" data-target="section-lists">
                        <a href="#"><i class="fa-solid fa-list-ul"></i> Listas</a>
                    </li>
                    <li class="nav-item" data-target="section-history">
                        <a href="#"><i class="fa-solid fa-clock-rotate-left"></i> Histórico</a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-profile">
                    <img src="https://i.pravatar.cc/150?img=68" alt="Avatar" class="user-avatar">
                    <div class="user-info">
                        <span class="user-name">Carregando...</span>
                        <span class="user-handle">@...</span>
                    </div>
                </div>
                <a href="#" class="logout-link"><i class="fa-solid fa-arrow-right-from-bracket"></i> Sair</a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Top Bar -->
            <header class="top-bar">
                <div class="header-greeting">
                    <h2 class="current-day" id="display-day">...</h2>
                    <p class="current-date" id="display-date"><i class="fa-regular fa-calendar"></i> ...</p>
                </div>

                <div class="action-group">
                    <div class="search-container hidden" id="headerSearch">
                        <i class="fa-solid fa-magnifying-glass search-icon"></i>
                        <input type="text" placeholder="Buscar livros..." class="search-input">
                    </div>

                    <button class="btn-add-book" id="openModalBtn">
                        <i class="fa-solid fa-plus"></i>
                        <span>Novo Livro</span>
                    </button>
                </div>
            </header>

            <!-- Área Dinâmica -->
            <div id="dynamic-content">

                <!-- SEÇÃO HOME -->
                <section id="section-home" class="content-section active">
                    <h1 class="welcome-title">Bem-vindo de volta, <span class="user-name-title">Leitor</span>.</h1>

                    <div class="empty-state">
                        <i class="fa-solid fa-book-open" style="font-size: 4rem; color: var(--color-accent-gold); margin-bottom: 20px;"></i>
                        <h2>Sua biblioteca está vazia</h2>
                        <p>Comece adicionando seus primeiros livros clicando no botão "Novo Livro" acima.</p>
                    </div>
                </section>

                <!-- SEÇÃO MEUS LIVROS -->
                <section id="section-books" class="content-section hidden">
                    <div class="section-header">
                        <h1 class="welcome-title">Minha Biblioteca</h1>
                        <div style="display:flex; gap:12px; align-items:center;">
                                <!-- Filtros (Agora Funcionais) -->
                            <div class="filter-options" id="libraryFilters">
                                <button class="filter-btn active" data-filter="Todos">Todos</button>
                                <button class="filter-btn" data-filter="Lendo">Lendo</button>
                                <button class="filter-btn" data-filter="Lido">Lidos</button>
                                <button class="filter-btn" data-filter="Quero Ler">Quero Ler</button>
                            </div>
                        </div>
                    </div>
                    <div class="library-grid" id="libraryContainer">
                        <!-- JS Injeta aqui -->
                    </div>
                </section>

                <!-- SEÇÃO METAS -->
                <section id="section-goals" class="content-section hidden">
                    <div class="section-header">
                        <h1 class="welcome-title">Metas de Leitura</h1>
                        <button class="btn-create-list" id="btnOpenGoalModal"><i class="fa-solid fa-bullseye"></i> Nova Meta</button>
                    </div>
                    <p class="section-subtitle">Acompanhe seu progresso anual ou mensal.</p>

                    <div class="goals-grid" id="goalsContainer">
                        <!-- JS Injeta as metas aqui -->
                    </div>
                </section>

                <!-- SEÇÃO LISTAS -->
                <section id="section-lists" class="content-section hidden">
                    <div class="section-header">
                        <h1 class="welcome-title">Minhas Listas</h1>
                        <button class="btn-create-list" id="btnCreateList"><i class="fa-solid fa-folder-plus"></i> Nova Lista</button>
                    </div>
                    <p class="section-subtitle">Organize seus livros em coleções personalizadas.</p>

                    <div class="lists-grid" id="listsContainer">
                        <!-- JS Injeta as listas aqui -->
                    </div>
                </section>

                <!-- SEÇÃO HISTÓRICO -->
                <section id="section-history" class="content-section hidden">
                    <h1 class="welcome-title">Histórico</h1>
                </section>

            </div>
        </main>
    </div>

    <!-- MODAL 1: ADICIONAR LIVRO -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div class="modal-box">
            <div class="modal-header">
                <h2>Adicionar Novo Livro</h2>
                <button class="close-modal-btn" id="closeModalBtn"><i class="fa-solid fa-times"></i></button>
            </div>
            <form class="modal-form">
                <div class="form-group">
                    <label>Título do Livro</label>
                    <input type="text" id="inputTitulo" placeholder="Ex: O Senhor dos Anéis" required>
                </div>
                <div class="form-group">
                    <label>Autor</label>
                    <input type="text" id="inputAutor" placeholder="Ex: J.R.R. Tolkien" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Páginas Totais</label>
                        <input type="number" id="inputPaginas" placeholder="0">
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="inputCategoria" required>
                            <option value="" disabled selected>Selecione...</option>
                            <option value="Fantasia">Fantasia</option>
                            <option value="Ficção Científica">Ficção Científica</option>
                            <option value="Romance">Romance</option>
                            <option value="Terror">Terror</option>
                            <option value="Técnico">Técnico/Acadêmico</option>
                            <option value="HQ">HQ/Mangá</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Capa do Livro (opcional)</label>
                    <input type="file" id="inputCover" accept="image/png, image/jpeg, image/jpg" style="padding: 8px;">
                    <small style="color: #888; font-size: 0.85rem; display: block; margin-top: 5px;">
                        Formatos aceitos: JPG, JPEG, PNG (máximo 5MB)
                    </small>
                    <div id="capaPreview" style="margin-top: 10px; text-align: center;"></div>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <div class="status-options">
                        <button type="button" class="status-btn" data-status="Quero Ler">Quero Ler</button>
                        <button type="button" class="status-btn active" data-status="Lendo">Lendo</button>
                        <button type="button" class="status-btn" data-status="Lido">Lido</button>
                    </div>
                </div>
                <button type="submit" class="submit-book-btn">Salvar Livro</button>
            </form>
        </div>
    </div>

    <!-- MODAL 2: ATUALIZAR LEITURA -->
    <div id="updateModalOverlay" class="modal-overlay hidden">
        <div class="modal-box small-modal">
            <div class="modal-header">
                <h2>Atualizar Leitura</h2>
                <button class="close-modal-btn" id="closeUpdateModalBtn"><i class="fa-solid fa-times"></i></button>
            </div>
            <div class="update-book-info">
                <h3>One Piece: Volume 100</h3>
                <p>Total de páginas: 200</p>
            </div>
            <form class="modal-form" id="formUpdateProgress">
                <div class="form-group">
                    <label>Página Atual</label>
                    <input type="number" id="inputCurrentPage" value="150" max="200">
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <div class="status-options">
                        <button type="button" class="status-btn active" data-status="Lendo">Lendo</button>
                        <button type="button" class="status-btn" data-status="Lido">Concluído</button>
                    </div>
                </div>
                <button type="submit" class="submit-book-btn">Atualizar</button>
            </form>
        </div>
    </div>

    <!-- MODAL 2.5: EDITAR LIVRO COMPLETO -->
    <div id="editBookModalOverlay" class="modal-overlay hidden">
        <div class="modal-box">
            <div class="modal-header">
                <h2>Editar Livro</h2>
                <button class="close-modal-btn" id="closeEditBookModalBtn"><i class="fa-solid fa-times"></i></button>
            </div>
            <form class="modal-form" id="formEditBook">
                <div class="form-row">
                    <div class="form-group">
                        <label>Título *</label>
                        <input type="text" id="editTitulo" required>
                    </div>
                    <div class="form-group">
                        <label>Autor *</label>
                        <input type="text" id="editAutor" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="editCategoria">
                            <option value="">Selecione...</option>
                            <option value="Ficção">Ficção</option>
                            <option value="Não-Ficção">Não-Ficção</option>
                            <option value="Romance">Romance</option>
                            <option value="Fantasia">Fantasia</option>
                            <option value="Suspense">Suspense</option>
                            <option value="Biografia">Biografia</option>
                            <option value="Técnico">Técnico/Acadêmico</option>
                            <option value="HQ">HQ/Mangá</option>
                            <option value="Outros">Outros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Total de Páginas</label>
                        <input type="number" id="editPaginas" min="1">
                    </div>
                </div>
                <div class="form-group">
                    <label>Alterar Capa (opcional)</label>
                    <input type="file" id="editCover" accept="image/png, image/jpeg, image/jpg" style="padding: 8px;">
                    <small style="color: #888; font-size: 0.85rem; display: block; margin-top: 5px;">
                        Deixe em branco para manter a capa atual
                    </small>
                    <div id="editCapaPreview" style="margin-top: 10px; text-align: center;"></div>
                </div>
                <button type="submit" class="submit-book-btn">Salvar Alterações</button>
            </form>
        </div>
    </div>

    <!-- MODAL 3: CRIAR/EDITAR META -->
    <div id="goalModalOverlay" class="modal-overlay hidden">
        <div class="modal-box small-modal">
            <div class="modal-header">
                <h2 id="goalModalTitle">Nova Meta</h2>
                <button class="close-modal-btn" id="closeGoalModalBtn"><i class="fa-solid fa-times"></i></button>
            </div>
            <form class="modal-form" id="goalForm">
                <input type="hidden" id="goalId"> <!-- ID oculto para edição -->
                <div class="form-group">
                    <label>Nome da Meta</label>
                    <input type="text" id="goalName" placeholder="Ex: Ler 12 Livros em 2025" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Meta (Qtd)</label>
                        <input type="number" id="goalTarget" placeholder="Ex: 12" required>
                    </div>
                    <div class="form-group">
                        <label>Atual</label>
                        <input type="number" id="goalCurrent" placeholder="Ex: 3" required>
                    </div>
                </div>
                <button type="submit" class="submit-book-btn">Salvar Meta</button>
            </form>
        </div>
    </div>

    <!-- MODAL 4: CRIAR/EDITAR LISTA -->
    <div id="listModalOverlay" class="modal-overlay hidden">
        <div class="modal-box small-modal">
            <div class="modal-header">
                <h2 id="listModalTitle">Nova Lista</h2>
                <button class="close-modal-btn" id="closeListModalBtn"><i class="fa-solid fa-times"></i></button>
            </div>
            <form class="modal-form" id="listForm">
                <input type="hidden" id="listId">
                <div class="form-group">
                    <label>Nome da Lista</label>
                    <input type="text" id="listName" placeholder="Ex: Clássicos Sci-Fi" required>
                </div>
                <button type="submit" class="submit-book-btn">Salvar Lista</button>
            </form>
        </div>
    </div>

    <!-- MODAL 5: DETALHES DA LISTA (Adicionar Livro) - NOVO -->
    <div id="listDetailsModalOverlay" class="modal-overlay hidden">
        <div class="modal-box">
            <div class="modal-header">
                <h2 id="listDetailsTitle">Nome da Lista</h2>
                <button class="close-modal-btn" id="closeListDetailsBtn"><i class="fa-solid fa-times"></i></button>
            </div>

            <!-- Área para Adicionar Livro na Lista -->
            <div class="add-book-to-list-wrapper">
                <select id="selectBookToAdd">
                    <option value="">Selecione um livro para adicionar...</option>
                    <!-- Preenchido via JS -->
                </select>
                <button id="btnAddBookToList" class="btn-icon-action"><i class="fa-solid fa-plus"></i></button>
            </div>

            <div class="list-contents-grid" id="listContentsContainer">
                <!-- Livros da lista aparecem aqui -->
                <p class="empty-list-msg">Esta lista está vazia.</p>
            </div>
        </div>
    </div>

    <!-- MODAL 6: VISUALIZAR LIVRO (Somente Leitura) -->
    <div id="viewBookModalOverlay" class="modal-overlay hidden">
        <div class="modal-box small-modal">
            <div class="modal-header">
                <h2>Detalhes do Livro</h2>
                <button class="close-modal-btn" id="closeViewBookModalBtn"><i class="fa-solid fa-times"></i></button>
            </div>
            <div class="view-book-content">
                <div class="view-book-cover-container">
                    <img id="viewBookCover" src="" alt="Capa do Livro" style="max-width: 200px; max-height: 300px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                </div>
                <div class="view-book-info">
                    <h3 id="viewBookTitle" style="font-size: 1.5rem; margin-bottom: 10px; color: var(--color-dark-bg);"></h3>
                    <p id="viewBookAuthor" style="font-size: 1.1rem; color: #666; margin-bottom: 15px;"></p>
                    <div class="view-book-details">
                        <p><strong>Total de Páginas:</strong> <span id="viewBookPages"></span></p>
                        <p><strong>Status:</strong> <span id="viewBookStatus" class="badge badge-status"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../config.js"></script>
    <script src="home.js"></script>
</body>
</html>
